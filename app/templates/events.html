{% extends "base.html" %}

{% block content%}
  {%if success is defined %}
    <div class="alert alert-success alert-dismissable">
      <span class="sr-only">Success:</span>
      {{ success }}
      <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>  
  {% endif %}
  {%if error is defined %}
    <div class="alert alert-danger alert-dismissable">
      <span class="sr-only">Error:</span>
      {{ error }}
      <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>  
  {% endif %}
    <form action="#" method="GET">
      <div class="input-group stylish-input-group">
          <input class="form-control" placeholder="Search" name="search" type="text">
          <span class="input-group-addon">
              <button type="submit" action="/events">
                <span class="glyphicon glyphicon-search"></span>
              </button>
          </span>
      </div>
  <table class="table">
    <thead>
      <tr>
        <th style="width: 80px">Event ID</th>
        <th style="width: 80px">Title</th>
        <th style="width: 140px">Description</th>
        <th style="width: 70px">Starting time</th>
        <th style="width: 70px">Ending time</th>
        <th style="width: 70px">Location</th>
        <th style="width: 30px">Zipcode</th>
        <th style="width: 70px">Sign Up</th>
      </tr>
    </thead>
    <tbody>
      
      {%for event in events%}
          <tr><td>{{event.event_id}}</td><td>{{event.title}}</td><td>{{event.description}}</td><td>{{event.start_time}}</td><td>{{event.end_time}}</td><td>{{event.location_name}}</td><td>{{event.zipcode}}</td><td><button type="submit" class="btn btn-default" action="/signup/{{event.event_id}}">
        {% if username is defined %}
            {% if signed_up(username, event.event_id) %}
            Rate
            {% else %}
            Sign Up
            {% endif %}
        {% endif %}
        </button></td></tr>
      {% endfor %}
      
      <!-- searches for all event and should give user option to signup for them-->
    </tbody>
  </table>
{% endblock %}
